**Copilot Guide for lpmz-portfolio-v2**

- Framework: Next.js App Router on React 19; shared layout and fonts live in [src/app/layout.tsx](src/app/layout.tsx). Page metadata defined per route (e.g., services at [src/app/page.tsx](src/app/page.tsx), overview at [src/app/overview/page.tsx](src/app/overview/page.tsx), portfolio at [src/app/portfolio/page.tsx](src/app/portfolio/page.tsx), education at [src/app/education/page.tsx](src/app/education/page.tsx)).
- Shell: All pages render inside [src/components/Common/PageShell.tsx](src/components/Common/PageShell.tsx), which is client-only and waits for the theme hook to mount before rendering to avoid hydration mismatch. Keep new top-level UI inside this shell so scroll progress, blobs, nav, and error boundary stay wired.
- Navigation/theme: [src/components/Common/TabNavigation.tsx](src/components/Common/TabNavigation.tsx) drives tabs and theme toggle; visibility is controlled by the throttled scroll hook. Dark mode state is stored in `localStorage` via [src/hooks/useDarkMode.ts](src/hooks/useDarkMode.ts). When changing nav items, keep `getActiveTab` in PageShell in sync with tab hrefs.
- Styling/motion: Tailwind-style utility classes with custom animations are scattered across components; animated backgrounds and scroll progress come from [src/components/Common/Effects.tsx](src/components/Common/Effects.tsx) and respect `useReducedMotion`. Avoid heavy animations on mobile/low-power devices—code already short-circuits for those.
- Data model: All portfolio content (bio, experience, projects, skills, services, contact info) is centralized in [src/lib/data.ts](src/lib/data.ts). Components across overview, portfolio, contact, and services read from this object; update here to propagate everywhere. Types for projects live in [src/lib/types.ts](src/lib/types.ts).
- Q&A assistant: The floating chatbot in [src/components/Common/ChatBot.tsx](src/components/Common/ChatBot.tsx) builds a passage via [src/lib/portfolioKnowledge.ts](src/lib/portfolioKnowledge.ts) and queries TensorFlow QnA using [src/hooks/useQnAModel.ts](src/hooks/useQnAModel.ts). The hook temporarily patches `fetch` to route model downloads through the proxy API—restore `window.fetch` even on errors.
- TFJS proxy: External TF Hub/Kaggle assets are fetched via [src/app/api/tfjs-proxy/[...path]/route.ts](src/app/api/tfjs-proxy/[...path]/route.ts) with permissive CORS and long cache headers. When changing model URLs, ensure the proxy rewrite logic still matches.
- Pages: Services page content lives in [src/components/Services/ServicesContent.tsx](src/components/Services/ServicesContent.tsx) and uses a mailto-based [ContactForm](src/components/Common/ContactForm.tsx); overview pulls Hero/Featured/Experience cards from [src/components/Overview](src/components/Overview), portfolio uses [src/components/Portfolio/projects.tsx](src/components/Portfolio/projects.tsx) with modal/filter/sort and [src/components/Portfolio/skills.tsx](src/components/Portfolio/skills.tsx) carousel; education uses [src/components/Education](src/components/Education).
- Hooks: Intersection/motion helpers reside in [src/hooks/useInView.ts](src/hooks/useInView.ts), [src/hooks/useScrollProgress.ts](src/hooks/useScrollProgress.ts), and [src/hooks/useThrottledScroll.ts](src/hooks/useThrottledScroll.ts). Prefer these over new ad-hoc observers to keep behavior consistent.
- UI primitives: Buttons, badges, cards, modals, section dividers, etc. live under [src/components/Common](src/components/Common). Reuse them to match spacing, shadows, and hover states.
- Assets: Project imagery sits under [public/](public); keep paths consistent with `DATA.projects[*].preview.screenshot` entries. Use `npm run optimize-images` to regenerate optimized assets when adding new images.
- Build/test: `npm run dev` for local, `npm run build` for production (supports `ANALYZE=true`), `npm run check` to run lint + type-check, `npm run lint:fix` for autofixes, `npm run format` for Prettier. Next config tweaks include optimized package imports and client fallbacks for `fs/path/crypto` ([next.config.ts](next.config.ts)).
- Deployment: Static content with client-heavy animations; contact form is mailto-only. If adding server actions/API routes, ensure they stay App Router compliant and don’t break existing client-only sections.
- Patterns: Animations often gated by `useInView` with `triggerOnce` and incremental delays; preserve this pattern when adding sections. Many components are wrapped in `use client`; be mindful of server/client boundaries when moving code.
- Accessibility/resilience: Error boundary lives in PageShell; keep new risky widgets inside it. Chatbot disables send while loading/typing; copy this pattern for similar async UI.
- SEO: Page-level `metadata` is defined in each `page.tsx`; add/update there rather than custom `<Head>` tags.
- Fonts/theme: Geist fonts configured in layout; if swapping fonts, update variables `--font-geist-sans`/`--font-geist-mono` and body class combination.

If anything here feels incomplete or unclear, tell me which sections to refine and I’ll update the guide.
